# v2.6.14-beta.3

## üêõ Bug Fixes

### Delta Check Bypass Enhancement

Fixed an issue where covers would not reposition when the sun transitioned from outside the field of view to inside the field of view if the calculated position was smaller than the `min_change` threshold.

**Problem:**
- When sun moved into the window's field of view, the "Sun Infront" binary sensor would change to ON
- However, if the calculated position (e.g., 3%) was less than the `min_change` setting (e.g., 5%), covers would remain at the default position (0%)
- Sun would shine through the window unblocked

**Solution:**
- Enhanced `check_position_delta()` to bypass the delta check when moving FROM special positions (0, 100, default height, sunset position)
- This ensures immediate repositioning when transitioning from passive (no sun tracking) to active (sun tracking) mode
- Delta filtering still applies during active sun tracking to prevent micro-adjustments

**Impact:**
- Covers now respond immediately when sun comes into field of view
- Better sun blocking at low sun angles (early morning/late afternoon)
- No regressions: existing delta filtering behavior preserved

### Diagnostic Sensor Accuracy

Fixed the "Calculated Position" diagnostic sensor to show the raw geometric calculation instead of the final position after min/max limits are applied.

**Problem:**
- Diagnostic sensor showed the final state after position limits were enforced
- Users could not see what the geometric calculation actually produced
- Made it difficult to debug safety margins, window depth, and position limits

**Solution:**
- Capture and store raw calculated position separately from final state
- Diagnostic sensor now displays the pure geometric calculation
- Users can see "what geometry wants" vs. "what limits enforce"

**Impact:**
- Better debugging of position limits and safety margins
- Improved transparency into calculation behavior
- Enhanced troubleshooting for window depth and edge cases
- No change to actual cover behavior (diagnostic display only)

## üß™ Testing

- All 214 unit tests pass
- Calculation coverage: 92%
- Helpers coverage: 100%
- No regressions detected

## üìã Installation

This is a **beta release** for testing purposes. Please test thoroughly before deploying to production.

### HACS Installation

1. Open HACS in Home Assistant
2. Go to Integrations
3. Find "Adaptive Cover Pro"
4. Click "Redownload" or "Download" to get beta version
5. Restart Home Assistant

### Manual Installation

1. Download `adaptive_cover_pro.zip` from this release
2. Extract to `custom_components/adaptive_cover_pro/`
3. Restart Home Assistant

## ‚ö†Ô∏è Beta Testing Notes

Please test the following scenarios:

1. **Sun transition from outside to inside field of view**
   - Wait for sun to be outside field of view ("Sun Infront" = OFF)
   - Cover should be at default position
   - When sun moves into field of view ("Sun Infront" = ON), cover should immediately reposition
   - Works even if calculated position is small (< min_change)

2. **Diagnostic sensor accuracy**
   - Check "Calculated Position" diagnostic sensor
   - If using min/max position limits, verify sensor shows raw calculation (not limited value)
   - Compare calculated position to actual cover position to see limit effects

3. **No regressions in normal operation**
   - Delta filtering should still work during active sun tracking
   - Covers should not make unnecessary micro-adjustments
   - Manual override detection should work normally

## üîó Related Issues

- Improves sun tracking responsiveness at low angles
- Enhances diagnostic transparency for troubleshooting

## üì¶ Requirements

- Home Assistant 2024.5.0+
- Python 3.11+

---

**Full Changelog**: https://github.com/yourusername/adaptive-cover/compare/v2.6.14-beta.2...v2.6.14-beta.3

# v2.6.16-beta.1

## üêõ Bug Fixes

### Fixed Manual Override False-Triggering (Issue #11)

The integration was incorrectly detecting its own automatic cover movements as manual user interventions, causing the manual override feature to trigger unexpectedly.

**Root Cause:** The integration cleared its "waiting for target" flag immediately upon reaching the target position. If the cover overshot, settled, or reported intermediate positions afterward, those changes were mistakenly identified as manual overrides.

**Solution:** Implemented a 5-second grace period after sending any cover command. During this grace period, ALL position changes are ignored, preventing false positives from:
- Cover overshooting target position
- Cover settling movements
- Intermediate position reports
- Timing delays in position updates

**Technical Details:**
- Added `COMMAND_GRACE_PERIOD_SECONDS = 5.0` constant
- Implemented timeout-based grace period tracking system
- Grace periods automatically expire after 5 seconds
- Manual override reset button cancels grace periods
- Actual user manual changes are still detected correctly (after grace period expires)

## üß™ Testing Instructions

**For Beta Testers:**

1. **Update to beta:**
   - Install v2.6.16-beta.1
   - Restart Home Assistant

2. **Test automatic movements:**
   - Enable manual override detection in your cover settings
   - Let the integration automatically move covers (sun tracking)
   - **Expected:** No false manual override triggers
   - **Watch for:** Covers overshooting or settling should NOT trigger manual override

3. **Test actual manual changes:**
   - Wait at least 6 seconds after an automatic cover movement
   - Manually move a cover using the cover controls (not the integration)
   - **Expected:** Manual override IS triggered correctly

4. **Test rapid movements:**
   - Trigger multiple rapid position changes (e.g., sun angle changing quickly)
   - **Expected:** No false triggers, grace periods reset properly

5. **Test edge cases:**
   - Test with covers that overshoot
   - Test with covers that report intermediate positions
   - Test with open/close-only covers

**Please report:**
- Whether false triggers are eliminated ‚úì
- Whether actual manual changes are still detected ‚úì
- Any unexpected behavior
- Your cover type (vertical/horizontal/tilt)
- Position control or open/close only

## üìã Installation

```yaml
# Install via HACS
# Or download adaptive_cover_pro.zip from release assets
```

## ‚ö†Ô∏è Beta Warning

This is a BETA release for testing purposes. While the fix is well-tested and backward compatible, please monitor your system for any unexpected behavior. The grace period is fixed at 5 seconds and cannot be configured in this release.

## üîó Related

- Issue #11: https://github.com/jrhubott/adaptive-cover/issues/11
- Full changes: 4 files modified, 274 lines added, 7 new tests
